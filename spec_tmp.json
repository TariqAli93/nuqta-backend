{"openapi":"3.0.3","info":{"title":"Nuqta API","description":"Nuqta POS & Inventory Management backend — OpenAPI 3.0 documentation.\n\nAll monetary values are in minor units (e.g. Iraqi Dinars with no sub-unit).","version":"1.0.0","contact":{"name":"Nuqta Team"}},"components":{"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT","description":"JWT token obtained from POST /api/v1/auth/login"}},"schemas":{"def-0":{"type":"object","required":["id"],"properties":{"id":{"type":"string","pattern":"^\\d+$","description":"Numeric resource ID"}},"title":"IdParams"},"def-1":{"type":"object","properties":{"page":{"type":"string","pattern":"^\\d+$","description":"Page number (1-based)"},"limit":{"type":"string","pattern":"^\\d+$","description":"Items per page"}},"title":"PaginationQuery"},"def-2":{"type":"object","properties":{"limit":{"type":"string","pattern":"^\\d+$","description":"Max items to return"},"offset":{"type":"string","pattern":"^\\d+$","description":"Number of items to skip"}},"title":"OffsetPaginationQuery"},"def-3":{"type":"object","properties":{"dateFrom":{"type":"string","format":"date","description":"Start date (YYYY-MM-DD)"},"dateTo":{"type":"string","format":"date","description":"End date (YYYY-MM-DD)"}},"title":"DateRangeQuery"},"def-4":{"type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{}},"title":"SuccessResponse"},"def-5":{"type":"object","required":["code","message"],"properties":{"code":{"type":"string","description":"Machine-readable error code"},"message":{"type":"string","description":"Human-readable description"},"details":{"description":"Additional error context"},"status":{"type":"integer","description":"HTTP status code"}},"title":"ErrorDetail"},"def-6":{"type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}},"title":"ErrorResponse"}}},"paths":{"/api/v1/accounting/accounts":{"get":{"summary":"List chart of accounts","tags":["Accounting"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Chart of accounts","content":{"application/json":{"schema":{"description":"Chart of accounts","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"code":{"type":"string"},"name":{"type":"string"},"nameAr":{"type":"string","nullable":true},"accountType":{"type":"string","enum":["asset","liability","equity","revenue","expense"]},"parentId":{"type":"integer","nullable":true},"isSystem":{"type":"boolean"},"isActive":{"type":"boolean"},"balance":{"type":"integer"},"createdAt":{"type":"string"}}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/accounting/journal-entries":{"get":{"summary":"List journal entries","tags":["Accounting"],"parameters":[{"schema":{"type":"string","enum":["sale","purchase","payment","adjustment","manual"]},"in":"query","name":"sourceType","required":false},{"schema":{"type":"string","format":"date"},"in":"query","name":"dateFrom","required":false},{"schema":{"type":"string","format":"date"},"in":"query","name":"dateTo","required":false},{"schema":{"type":"string","enum":["true","false"]},"in":"query","name":"isPosted","required":false},{"schema":{"type":"string","pattern":"^\\d+$"},"in":"query","name":"limit","required":false},{"schema":{"type":"string","pattern":"^\\d+$"},"in":"query","name":"offset","required":false}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Journal entries","content":{"application/json":{"schema":{"description":"Journal entries","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"entryNumber":{"type":"string"},"entryDate":{"type":"string"},"description":{"type":"string"},"sourceType":{"type":"string","nullable":true,"enum":["sale","purchase","payment","adjustment","manual"]},"sourceId":{"type":"integer","nullable":true},"isPosted":{"type":"boolean"},"isReversed":{"type":"boolean"},"reversalOfId":{"type":"integer","nullable":true},"postingBatchId":{"type":"integer","nullable":true},"totalAmount":{"type":"integer"},"currency":{"type":"string"},"notes":{"type":"string","nullable":true},"createdAt":{"type":"string"},"createdBy":{"type":"integer","nullable":true},"lines":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"journalEntryId":{"type":"integer"},"accountId":{"type":"integer"},"debit":{"type":"integer"},"credit":{"type":"integer"},"description":{"type":"string","nullable":true},"createdAt":{"type":"string"}}}}}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/accounting/journal-entries/{id}":{"get":{"summary":"Get journal entry by ID","tags":["Accounting"],"parameters":[{"schema":{"type":"string","pattern":"^\\d+$"},"in":"path","name":"id","required":true,"description":"Numeric resource ID"}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Journal entry details","content":{"application/json":{"schema":{"description":"Journal entry details","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"id":{"type":"integer"},"entryNumber":{"type":"string"},"entryDate":{"type":"string"},"description":{"type":"string"},"sourceType":{"type":"string","nullable":true,"enum":["sale","purchase","payment","adjustment","manual"]},"sourceId":{"type":"integer","nullable":true},"isPosted":{"type":"boolean"},"isReversed":{"type":"boolean"},"reversalOfId":{"type":"integer","nullable":true},"postingBatchId":{"type":"integer","nullable":true},"totalAmount":{"type":"integer"},"currency":{"type":"string"},"notes":{"type":"string","nullable":true},"createdAt":{"type":"string"},"createdBy":{"type":"integer","nullable":true},"lines":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"journalEntryId":{"type":"integer"},"accountId":{"type":"integer"},"debit":{"type":"integer"},"credit":{"type":"integer"},"description":{"type":"string","nullable":true},"createdAt":{"type":"string"}}}}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/accounting/trial-balance":{"get":{"summary":"Get trial balance","tags":["Accounting"],"parameters":[{"schema":{"type":"string","format":"date"},"in":"query","name":"dateFrom","required":false},{"schema":{"type":"string","format":"date"},"in":"query","name":"dateTo","required":false}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Trial balance","content":{"application/json":{"schema":{"description":"Trial balance","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"array","items":{"type":"object","properties":{"accountId":{"type":"integer"},"accountCode":{"type":"string"},"accountName":{"type":"string"},"accountType":{"type":"string"},"debit":{"type":"integer"},"credit":{"type":"integer"},"balance":{"type":"integer"}}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/accounting/profit-loss":{"get":{"summary":"Get profit & loss report","tags":["Accounting"],"parameters":[{"schema":{"type":"string","format":"date"},"in":"query","name":"dateFrom","required":false},{"schema":{"type":"string","format":"date"},"in":"query","name":"dateTo","required":false}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Profit & loss report","content":{"application/json":{"schema":{"description":"Profit & loss report","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object"}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/accounting/balance-sheet":{"get":{"summary":"Get balance sheet","tags":["Accounting"],"parameters":[{"schema":{"type":"string","format":"date"},"in":"query","name":"fromDate","required":false},{"schema":{"type":"string","format":"date"},"in":"query","name":"toDate","required":false}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Balance sheet","content":{"application/json":{"schema":{"description":"Balance sheet","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object"}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/accounting/initialize":{"post":{"summary":"Initialize accounting system","tags":["Accounting"],"description":"Set up initial chart of accounts. Idempotent operation.","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"description":"Optional initialization parameters"}}},"description":"Optional initialization parameters"},"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Initialization result","content":{"application/json":{"schema":{"description":"Initialization result","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object"}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/accounting/status":{"get":{"summary":"Get accounting system status","tags":["Accounting"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Accounting status","content":{"application/json":{"schema":{"description":"Accounting status","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"isInitialized":{"type":"boolean"},"accountCount":{"type":"integer"}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/auth/login":{"post":{"summary":"User login","tags":["Auth"],"description":"Authenticate with username and password, returns a JWT token.","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["username","password"],"properties":{"username":{"type":"string","minLength":1,"description":"Login username"},"password":{"type":"string","minLength":1,"description":"Login password"}},"additionalProperties":false}}}},"responses":{"200":{"description":"Login successful","content":{"application/json":{"schema":{"description":"Login successful","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"token":{"type":"string"},"user":{"type":"object","properties":{"id":{"type":"integer"},"username":{"type":"string"},"fullName":{"type":"string"},"phone":{"type":"string","nullable":true},"role":{"type":"string","enum":["admin","cashier","manager","viewer"]},"isActive":{"type":"boolean"},"lastLoginAt":{"type":"string","nullable":true},"createdAt":{"type":"string"},"updatedAt":{"type":"string","nullable":true}}},"permissions":{"type":"array","items":{"type":"string"}}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/auth/register":{"post":{"summary":"Register first user","tags":["Auth"],"description":"Register the initial admin user. Only works when no users exist.","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["username","password","fullName"],"properties":{"username":{"type":"string","minLength":1},"password":{"type":"string","minLength":1},"fullName":{"type":"string","minLength":1},"phone":{"type":"string","nullable":true}},"additionalProperties":false}}}},"responses":{"200":{"description":"User created","content":{"application/json":{"schema":{"description":"User created","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"id":{"type":"integer"},"username":{"type":"string"},"fullName":{"type":"string"},"phone":{"type":"string","nullable":true},"role":{"type":"string","enum":["admin","cashier","manager","viewer"]},"isActive":{"type":"boolean"},"lastLoginAt":{"type":"string","nullable":true},"createdAt":{"type":"string"},"updatedAt":{"type":"string","nullable":true}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/auth/setup-status":{"get":{"summary":"Check setup status","tags":["Auth"],"description":"Check whether initial setup has been completed.","responses":{"200":{"description":"Setup status","content":{"application/json":{"schema":{"description":"Setup status","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"hasUsers":{"type":"boolean"},"isSetupComplete":{"type":"boolean"}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/categories/":{"get":{"summary":"List all categories","tags":["Categories"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"List of categories","content":{"application/json":{"schema":{"description":"List of categories","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"},"description":{"type":"string","nullable":true},"isActive":{"type":"boolean"},"createdAt":{"type":"string"},"createdBy":{"type":"integer","nullable":true}}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}},"post":{"summary":"Create a category","tags":["Categories"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["name"],"properties":{"name":{"type":"string","minLength":1},"description":{"type":"string","nullable":true},"isActive":{"type":"boolean","default":true}},"additionalProperties":false}}}},"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Created category","content":{"application/json":{"schema":{"description":"Created category","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"},"description":{"type":"string","nullable":true},"isActive":{"type":"boolean"},"createdAt":{"type":"string"},"createdBy":{"type":"integer","nullable":true}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/categories/{id}":{"put":{"summary":"Update a category","tags":["Categories"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","minLength":1},"description":{"type":"string","nullable":true},"isActive":{"type":"boolean"}},"additionalProperties":false}}}},"parameters":[{"schema":{"type":"string","pattern":"^\\d+$"},"in":"path","name":"id","required":true,"description":"Numeric resource ID"}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Updated category","content":{"application/json":{"schema":{"description":"Updated category","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"},"description":{"type":"string","nullable":true},"isActive":{"type":"boolean"},"createdAt":{"type":"string"},"createdBy":{"type":"integer","nullable":true}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}},"delete":{"summary":"Delete a category","tags":["Categories"],"parameters":[{"schema":{"type":"string","pattern":"^\\d+$"},"in":"path","name":"id","required":true,"description":"Numeric resource ID"}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Operation completed","content":{"application/json":{"schema":{"description":"Operation completed","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"null"}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/customer-ledger/{customerId}":{"get":{"summary":"Get customer ledger entries","tags":["Customer Ledger"],"parameters":[{"schema":{"type":"string","format":"date"},"in":"query","name":"dateFrom","required":false},{"schema":{"type":"string","format":"date"},"in":"query","name":"dateTo","required":false},{"schema":{"type":"string","pattern":"^\\d+$"},"in":"query","name":"limit","required":false},{"schema":{"type":"string","pattern":"^\\d+$"},"in":"query","name":"offset","required":false},{"schema":{"type":"string","pattern":"^\\d+$"},"in":"path","name":"customerId","required":true,"description":"Customer ID"}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Customer ledger","content":{"application/json":{"schema":{"description":"Customer ledger","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"entries":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"customerId":{"type":"integer"},"transactionType":{"type":"string","enum":["invoice","payment","return","adjustment","opening"]},"amount":{"type":"integer"},"balanceAfter":{"type":"integer"},"saleId":{"type":"integer","nullable":true},"paymentId":{"type":"integer","nullable":true},"journalEntryId":{"type":"integer","nullable":true},"notes":{"type":"string","nullable":true},"createdAt":{"type":"string"},"createdBy":{"type":"integer","nullable":true}}}},"balance":{"type":"integer"}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/customer-ledger/{customerId}/payments":{"post":{"summary":"Record a customer payment","tags":["Customer Ledger"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["amount","paymentMethod"],"properties":{"amount":{"type":"number","minimum":0.01,"description":"Payment amount"},"paymentMethod":{"type":"string","enum":["cash","card","bank_transfer","credit"]},"notes":{"type":"string"},"idempotencyKey":{"type":"string"}},"additionalProperties":false}}}},"parameters":[{"schema":{"type":"string","pattern":"^\\d+$"},"in":"path","name":"customerId","required":true,"description":"Customer ID"}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Payment recorded","content":{"application/json":{"schema":{"description":"Payment recorded","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object"}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/customer-ledger/{customerId}/adjustments":{"post":{"summary":"Add customer ledger adjustment","tags":["Customer Ledger"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["amount"],"properties":{"amount":{"type":"number","description":"Adjustment amount (positive or negative)"},"notes":{"type":"string"}},"additionalProperties":false}}}},"parameters":[{"schema":{"type":"string","pattern":"^\\d+$"},"in":"path","name":"customerId","required":true,"description":"Customer ID"}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Adjustment recorded","content":{"application/json":{"schema":{"description":"Adjustment recorded","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object"}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/customer-ledger/reconcile":{"post":{"summary":"Reconcile customer debt","tags":["Customer Ledger"],"description":"Check (or repair) customer debt totals against ledger sum.","parameters":[{"schema":{"type":"string","enum":["true","false"]},"in":"query","name":"repair","required":false,"description":"If true, auto-correct discrepancies"}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Reconciliation result","content":{"application/json":{"schema":{"description":"Reconciliation result","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object"}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/customers/":{"get":{"summary":"List customers","tags":["Customers"],"parameters":[{"schema":{"type":"string"},"in":"query","name":"search","required":false,"description":"Search by name"},{"schema":{"type":"string","pattern":"^\\d+$"},"in":"query","name":"page","required":false,"description":"Page number (1-based)"},{"schema":{"type":"string","pattern":"^\\d+$"},"in":"query","name":"limit","required":false,"description":"Items per page"}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"List of customers","content":{"application/json":{"schema":{"description":"List of customers","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"},"phone":{"type":"string","nullable":true},"address":{"type":"string","nullable":true},"city":{"type":"string","nullable":true},"notes":{"type":"string","nullable":true},"totalPurchases":{"type":"integer"},"totalDebt":{"type":"integer"},"isActive":{"type":"boolean"},"createdAt":{"type":"string"},"updatedAt":{"type":"string","nullable":true},"createdBy":{"type":"integer","nullable":true}}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}},"post":{"summary":"Create a customer","tags":["Customers"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["name"],"properties":{"name":{"type":"string","minLength":1},"phone":{"type":"string","nullable":true},"address":{"type":"string","nullable":true},"city":{"type":"string","nullable":true},"notes":{"type":"string","nullable":true},"isActive":{"type":"boolean","default":true}},"additionalProperties":false}}}},"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Created customer","content":{"application/json":{"schema":{"description":"Created customer","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"},"phone":{"type":"string","nullable":true},"address":{"type":"string","nullable":true},"city":{"type":"string","nullable":true},"notes":{"type":"string","nullable":true},"totalPurchases":{"type":"integer"},"totalDebt":{"type":"integer"},"isActive":{"type":"boolean"},"createdAt":{"type":"string"},"updatedAt":{"type":"string","nullable":true},"createdBy":{"type":"integer","nullable":true}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/customers/{id}":{"put":{"summary":"Update a customer","tags":["Customers"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","minLength":1},"phone":{"type":"string","nullable":true},"address":{"type":"string","nullable":true},"city":{"type":"string","nullable":true},"notes":{"type":"string","nullable":true},"isActive":{"type":"boolean"}},"additionalProperties":false}}}},"parameters":[{"schema":{"type":"string","pattern":"^\\d+$"},"in":"path","name":"id","required":true,"description":"Numeric resource ID"}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Updated customer","content":{"application/json":{"schema":{"description":"Updated customer","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"},"phone":{"type":"string","nullable":true},"address":{"type":"string","nullable":true},"city":{"type":"string","nullable":true},"notes":{"type":"string","nullable":true},"totalPurchases":{"type":"integer"},"totalDebt":{"type":"integer"},"isActive":{"type":"boolean"},"createdAt":{"type":"string"},"updatedAt":{"type":"string","nullable":true},"createdBy":{"type":"integer","nullable":true}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}},"delete":{"summary":"Delete a customer","tags":["Customers"],"parameters":[{"schema":{"type":"string","pattern":"^\\d+$"},"in":"path","name":"id","required":true,"description":"Numeric resource ID"}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Operation completed","content":{"application/json":{"schema":{"description":"Operation completed","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"null"}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/dashboard/stats":{"get":{"summary":"Get dashboard statistics","tags":["Dashboard"],"description":"Aggregated overview metrics for sales and inventory.","security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Dashboard statistics","content":{"application/json":{"schema":{"description":"Dashboard statistics","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"totalSales":{"type":"integer","description":"Total sales count"},"totalRevenue":{"type":"integer","description":"Total revenue in base currency"},"totalProducts":{"type":"integer","description":"Total product count"},"lowStockCount":{"type":"integer","description":"Products below min stock"},"todaySales":{"type":"integer","description":"Sales created today"},"todayRevenue":{"type":"integer","description":"Revenue from today's sales"}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/inventory/movements":{"get":{"summary":"List inventory movements","tags":["Inventory"],"parameters":[{"schema":{"type":"string","pattern":"^\\d+$"},"in":"query","name":"productId","required":false,"description":"Filter by product"},{"schema":{"type":"string","enum":["in","out","adjust"]},"in":"query","name":"movementType","required":false},{"schema":{"type":"string","pattern":"^\\d+$"},"in":"query","name":"limit","required":false},{"schema":{"type":"string","pattern":"^\\d+$"},"in":"query","name":"offset","required":false}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Inventory movements","content":{"application/json":{"schema":{"description":"Inventory movements","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"productId":{"type":"integer"},"batchId":{"type":"integer","nullable":true},"movementType":{"type":"string","enum":["in","out","adjust"]},"reason":{"type":"string","enum":["sale","purchase","return","damage","manual","opening"]},"quantityBase":{"type":"integer"},"unitName":{"type":"string"},"unitFactor":{"type":"integer"},"stockBefore":{"type":"integer"},"stockAfter":{"type":"integer"},"costPerUnit":{"type":"integer","nullable":true},"totalCost":{"type":"integer","nullable":true},"sourceType":{"type":"string","nullable":true,"enum":["sale","purchase","adjustment","return"]},"sourceId":{"type":"integer","nullable":true},"notes":{"type":"string","nullable":true},"createdAt":{"type":"string"},"createdBy":{"type":"integer","nullable":true}}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/inventory/dashboard":{"get":{"summary":"Get inventory dashboard","tags":["Inventory"],"description":"Overview of inventory health: low stock, expiring items, totals.","security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Inventory dashboard data","content":{"application/json":{"schema":{"description":"Inventory dashboard data","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object"}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/inventory/expiry-alerts":{"get":{"summary":"Get expiry alerts","tags":["Inventory"],"description":"Products nearing or past expiry date.","security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Expiry alerts","content":{"application/json":{"schema":{"description":"Expiry alerts","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"array","items":{"type":"object"}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/posting/period":{"post":{"summary":"Post entries for a period","tags":["Posting"],"description":"Batch-post all unposted journal entries within a date range.","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["periodType","periodStart","periodEnd"],"properties":{"periodType":{"type":"string","enum":["day","month","year"]},"periodStart":{"type":"string","minLength":1,"description":"Start date (YYYY-MM-DD)"},"periodEnd":{"type":"string","minLength":1,"description":"End date (YYYY-MM-DD)"},"notes":{"type":"string"}},"additionalProperties":false}}}},"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Posting batch result","content":{"application/json":{"schema":{"description":"Posting batch result","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"id":{"type":"integer"},"periodType":{"type":"string","enum":["day","month","year"]},"periodStart":{"type":"string"},"periodEnd":{"type":"string"},"entriesCount":{"type":"integer"},"totalAmount":{"type":"integer"},"status":{"type":"string","enum":["draft","posted","locked"]},"postedAt":{"type":"string","nullable":true},"postedBy":{"type":"integer","nullable":true},"notes":{"type":"string","nullable":true},"createdAt":{"type":"string"}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/posting/entries/{id}/reverse":{"post":{"summary":"Reverse a journal entry","tags":["Posting"],"parameters":[{"schema":{"type":"string","pattern":"^\\d+$"},"in":"path","name":"id","required":true,"description":"Numeric resource ID"}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Reversal result","content":{"application/json":{"schema":{"description":"Reversal result","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object"}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/posting/entries/{id}/post":{"post":{"summary":"Post an individual entry","tags":["Posting"],"parameters":[{"schema":{"type":"string","pattern":"^\\d+$"},"in":"path","name":"id","required":true,"description":"Numeric resource ID"}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Posted entry","content":{"application/json":{"schema":{"description":"Posted entry","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object"}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/posting/entries/{id}/unpost":{"post":{"summary":"Unpost an individual entry","tags":["Posting"],"parameters":[{"schema":{"type":"string","pattern":"^\\d+$"},"in":"path","name":"id","required":true,"description":"Numeric resource ID"}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Unposted entry","content":{"application/json":{"schema":{"description":"Unposted entry","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object"}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/products/":{"get":{"summary":"List products","tags":["Products"],"parameters":[{"schema":{"type":"string"},"in":"query","name":"search","required":false,"description":"Search by product name/SKU"},{"schema":{"type":"string","pattern":"^\\d+$"},"in":"query","name":"page","required":false},{"schema":{"type":"string","pattern":"^\\d+$"},"in":"query","name":"limit","required":false},{"schema":{"type":"string","pattern":"^\\d+$"},"in":"query","name":"categoryId","required":false,"description":"Filter by category"},{"schema":{"type":"string","pattern":"^\\d+$"},"in":"query","name":"supplierId","required":false,"description":"Filter by supplier"},{"schema":{"type":"string","enum":["available","out_of_stock","discontinued"]},"in":"query","name":"status","required":false},{"schema":{"type":"string","enum":["true","false"]},"in":"query","name":"lowStockOnly","required":false,"description":"Only low-stock items"},{"schema":{"type":"string","enum":["true","false"]},"in":"query","name":"expiringSoonOnly","required":false,"description":"Only expiring soon"}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Paginated product list","content":{"application/json":{"schema":{"description":"Paginated product list","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"items":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"},"sku":{"type":"string","nullable":true},"barcode":{"type":"string","nullable":true},"categoryId":{"type":"integer","nullable":true},"description":{"type":"string","nullable":true},"costPrice":{"type":"integer"},"sellingPrice":{"type":"integer"},"currency":{"type":"string"},"stock":{"type":"integer"},"minStock":{"type":"integer"},"unit":{"type":"string"},"supplier":{"type":"string","nullable":true},"supplierId":{"type":"integer","nullable":true},"expireDate":{"type":"string","nullable":true},"isExpire":{"type":"boolean"},"status":{"type":"string","enum":["available","out_of_stock","discontinued"]},"isActive":{"type":"boolean"},"createdAt":{"type":"string"},"updatedAt":{"type":"string","nullable":true},"createdBy":{"type":"integer","nullable":true}}}},"total":{"type":"integer"},"page":{"type":"integer"},"limit":{"type":"integer"}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}},"post":{"summary":"Create a product","tags":["Products"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["name","costPrice","sellingPrice"],"properties":{"name":{"type":"string","minLength":1},"sku":{"type":"string","nullable":true},"barcode":{"type":"string","nullable":true},"categoryId":{"type":"integer","nullable":true},"description":{"type":"string","nullable":true},"costPrice":{"type":"integer","minimum":0},"sellingPrice":{"type":"integer","minimum":0},"currency":{"type":"string","default":"IQD"},"stock":{"type":"integer","minimum":0,"default":0},"minStock":{"type":"integer","minimum":0,"default":0},"unit":{"type":"string","default":"piece"},"supplier":{"type":"string","nullable":true},"supplierId":{"type":"integer","nullable":true},"expireDate":{"type":"string","nullable":true},"isExpire":{"type":"boolean","default":false},"status":{"type":"string","enum":["available","out_of_stock","discontinued"],"default":"available"},"isActive":{"type":"boolean","default":true}}}}}},"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Created product","content":{"application/json":{"schema":{"description":"Created product","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"},"sku":{"type":"string","nullable":true},"barcode":{"type":"string","nullable":true},"categoryId":{"type":"integer","nullable":true},"description":{"type":"string","nullable":true},"costPrice":{"type":"integer"},"sellingPrice":{"type":"integer"},"currency":{"type":"string"},"stock":{"type":"integer"},"minStock":{"type":"integer"},"unit":{"type":"string"},"supplier":{"type":"string","nullable":true},"supplierId":{"type":"integer","nullable":true},"expireDate":{"type":"string","nullable":true},"isExpire":{"type":"boolean"},"status":{"type":"string","enum":["available","out_of_stock","discontinued"]},"isActive":{"type":"boolean"},"createdAt":{"type":"string"},"updatedAt":{"type":"string","nullable":true},"createdBy":{"type":"integer","nullable":true}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/products/{id}":{"put":{"summary":"Update a product","tags":["Products"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","minLength":1},"sku":{"type":"string","nullable":true},"barcode":{"type":"string","nullable":true},"categoryId":{"type":"integer","nullable":true},"description":{"type":"string","nullable":true},"costPrice":{"type":"integer","minimum":0},"sellingPrice":{"type":"integer","minimum":0},"currency":{"type":"string"},"stock":{"type":"integer","minimum":0},"minStock":{"type":"integer","minimum":0},"unit":{"type":"string"},"supplier":{"type":"string","nullable":true},"supplierId":{"type":"integer","nullable":true},"expireDate":{"type":"string","nullable":true},"isExpire":{"type":"boolean"},"status":{"type":"string","enum":["available","out_of_stock","discontinued"]},"isActive":{"type":"boolean"}}}}}},"parameters":[{"schema":{"type":"string","pattern":"^\\d+$"},"in":"path","name":"id","required":true,"description":"Numeric resource ID"}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Updated product","content":{"application/json":{"schema":{"description":"Updated product","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"},"sku":{"type":"string","nullable":true},"barcode":{"type":"string","nullable":true},"categoryId":{"type":"integer","nullable":true},"description":{"type":"string","nullable":true},"costPrice":{"type":"integer"},"sellingPrice":{"type":"integer"},"currency":{"type":"string"},"stock":{"type":"integer"},"minStock":{"type":"integer"},"unit":{"type":"string"},"supplier":{"type":"string","nullable":true},"supplierId":{"type":"integer","nullable":true},"expireDate":{"type":"string","nullable":true},"isExpire":{"type":"boolean"},"status":{"type":"string","enum":["available","out_of_stock","discontinued"]},"isActive":{"type":"boolean"},"createdAt":{"type":"string"},"updatedAt":{"type":"string","nullable":true},"createdBy":{"type":"integer","nullable":true}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}},"delete":{"summary":"Delete a product","tags":["Products"],"parameters":[{"schema":{"type":"string","pattern":"^\\d+$"},"in":"path","name":"id","required":true,"description":"Numeric resource ID"}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Operation completed","content":{"application/json":{"schema":{"description":"Operation completed","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"null"}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/products/{id}/adjust-stock":{"post":{"summary":"Adjust product stock","tags":["Products"],"description":"Manually adjust stock quantity for a product.","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["quantityChange"],"properties":{"quantityChange":{"type":"number","description":"Positive to add, negative to subtract"},"reason":{"type":"string","enum":["manual","damage","opening"]},"notes":{"type":"string","nullable":true},"batchId":{"type":"integer","nullable":true},"unitName":{"type":"string"},"unitFactor":{"type":"integer","minimum":1}},"additionalProperties":false}}}},"parameters":[{"schema":{"type":"string","pattern":"^\\d+$"},"in":"path","name":"id","required":true,"description":"Numeric resource ID"}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Stock adjustment result","content":{"application/json":{"schema":{"description":"Stock adjustment result","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object"}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/products/{id}/reconcile":{"post":{"summary":"Reconcile product stock","tags":["Products"],"description":"Reconcile stock based on inventory movements.","parameters":[{"schema":{"type":"string","pattern":"^\\d+$"},"in":"path","name":"id","required":true,"description":"Numeric resource ID"}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Reconciliation result","content":{"application/json":{"schema":{"description":"Reconciliation result","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object"}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/purchases/":{"get":{"summary":"List purchases","tags":["Purchases"],"parameters":[{"schema":{"type":"string"},"in":"query","name":"search","required":false,"description":"Search by invoice number"},{"schema":{"type":"string","enum":["pending","completed","cancelled","received","partial"]},"in":"query","name":"status","required":false},{"schema":{"type":"string","pattern":"^\\d+$"},"in":"query","name":"limit","required":false},{"schema":{"type":"string","pattern":"^\\d+$"},"in":"query","name":"offset","required":false}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"List of purchases","content":{"application/json":{"schema":{"description":"List of purchases","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"invoiceNumber":{"type":"string"},"supplierId":{"type":"integer"},"subtotal":{"type":"integer"},"discount":{"type":"integer"},"tax":{"type":"integer"},"total":{"type":"integer"},"paidAmount":{"type":"integer"},"remainingAmount":{"type":"integer"},"currency":{"type":"string"},"exchangeRate":{"type":"number"},"status":{"type":"string","enum":["pending","completed","cancelled","received","partial"]},"notes":{"type":"string","nullable":true},"receivedAt":{"type":"string","nullable":true},"idempotencyKey":{"type":"string","nullable":true},"createdAt":{"type":"string"},"updatedAt":{"type":"string","nullable":true},"createdBy":{"type":"integer","nullable":true},"items":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"purchaseId":{"type":"integer"},"productId":{"type":"integer"},"productName":{"type":"string"},"unitName":{"type":"string"},"unitFactor":{"type":"integer"},"quantity":{"type":"integer"},"quantityBase":{"type":"integer"},"unitCost":{"type":"integer"},"lineSubtotal":{"type":"integer"},"discount":{"type":"integer"},"batchId":{"type":"integer","nullable":true},"batchNumber":{"type":"string","nullable":true},"expiryDate":{"type":"string","nullable":true},"createdAt":{"type":"string"}}}},"payments":{"type":"array","items":{"type":"object"}}}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}},"post":{"summary":"Create a purchase","tags":["Purchases"],"description":"Create a new purchase order with line items.","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["invoiceNumber","supplierId","items"],"properties":{"invoiceNumber":{"type":"string","minLength":1},"supplierId":{"type":"integer","minimum":1},"items":{"type":"array","items":{"type":"object","required":["productId","quantity","unitCost"],"properties":{"productId":{"type":"integer","minimum":1},"productName":{"type":"string"},"unitName":{"type":"string"},"unitFactor":{"type":"integer","minimum":1},"quantity":{"type":"integer","minimum":1},"quantityBase":{"type":"integer","minimum":1},"unitCost":{"type":"integer","minimum":0},"lineSubtotal":{"type":"integer","minimum":0},"discount":{"type":"integer","minimum":0},"batchId":{"type":"integer"},"batchNumber":{"type":"string"},"expiryDate":{"type":"string"}}},"minItems":1},"discount":{"type":"integer","minimum":0},"tax":{"type":"integer","minimum":0},"paidAmount":{"type":"integer","minimum":0},"currency":{"type":"string"},"notes":{"type":"string"},"paymentMethod":{"type":"string","enum":["cash","card","bank_transfer","credit"]},"referenceNumber":{"type":"string"},"idempotencyKey":{"type":"string"}},"additionalProperties":false}}}},"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Created purchase","content":{"application/json":{"schema":{"description":"Created purchase","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"id":{"type":"integer"},"invoiceNumber":{"type":"string"},"supplierId":{"type":"integer"},"subtotal":{"type":"integer"},"discount":{"type":"integer"},"tax":{"type":"integer"},"total":{"type":"integer"},"paidAmount":{"type":"integer"},"remainingAmount":{"type":"integer"},"currency":{"type":"string"},"exchangeRate":{"type":"number"},"status":{"type":"string","enum":["pending","completed","cancelled","received","partial"]},"notes":{"type":"string","nullable":true},"receivedAt":{"type":"string","nullable":true},"idempotencyKey":{"type":"string","nullable":true},"createdAt":{"type":"string"},"updatedAt":{"type":"string","nullable":true},"createdBy":{"type":"integer","nullable":true},"items":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"purchaseId":{"type":"integer"},"productId":{"type":"integer"},"productName":{"type":"string"},"unitName":{"type":"string"},"unitFactor":{"type":"integer"},"quantity":{"type":"integer"},"quantityBase":{"type":"integer"},"unitCost":{"type":"integer"},"lineSubtotal":{"type":"integer"},"discount":{"type":"integer"},"batchId":{"type":"integer","nullable":true},"batchNumber":{"type":"string","nullable":true},"expiryDate":{"type":"string","nullable":true},"createdAt":{"type":"string"}}}},"payments":{"type":"array","items":{"type":"object"}}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/purchases/{id}":{"get":{"summary":"Get purchase by ID","tags":["Purchases"],"parameters":[{"schema":{"type":"string","pattern":"^\\d+$"},"in":"path","name":"id","required":true,"description":"Numeric resource ID"}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Purchase details","content":{"application/json":{"schema":{"description":"Purchase details","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"id":{"type":"integer"},"invoiceNumber":{"type":"string"},"supplierId":{"type":"integer"},"subtotal":{"type":"integer"},"discount":{"type":"integer"},"tax":{"type":"integer"},"total":{"type":"integer"},"paidAmount":{"type":"integer"},"remainingAmount":{"type":"integer"},"currency":{"type":"string"},"exchangeRate":{"type":"number"},"status":{"type":"string","enum":["pending","completed","cancelled","received","partial"]},"notes":{"type":"string","nullable":true},"receivedAt":{"type":"string","nullable":true},"idempotencyKey":{"type":"string","nullable":true},"createdAt":{"type":"string"},"updatedAt":{"type":"string","nullable":true},"createdBy":{"type":"integer","nullable":true},"items":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"purchaseId":{"type":"integer"},"productId":{"type":"integer"},"productName":{"type":"string"},"unitName":{"type":"string"},"unitFactor":{"type":"integer"},"quantity":{"type":"integer"},"quantityBase":{"type":"integer"},"unitCost":{"type":"integer"},"lineSubtotal":{"type":"integer"},"discount":{"type":"integer"},"batchId":{"type":"integer","nullable":true},"batchNumber":{"type":"string","nullable":true},"expiryDate":{"type":"string","nullable":true},"createdAt":{"type":"string"}}}},"payments":{"type":"array","items":{"type":"object"}}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/purchases/{id}/payments":{"post":{"summary":"Add payment to a purchase","tags":["Purchases"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["amount","paymentMethod"],"properties":{"supplierId":{"type":"integer"},"amount":{"type":"integer","minimum":1},"currency":{"type":"string"},"exchangeRate":{"type":"number"},"paymentMethod":{"type":"string","enum":["cash","card","bank_transfer","credit"]},"referenceNumber":{"type":"string"},"notes":{"type":"string"},"idempotencyKey":{"type":"string"}},"additionalProperties":false}}}},"parameters":[{"schema":{"type":"string","pattern":"^\\d+$"},"in":"path","name":"id","required":true,"description":"Numeric resource ID"}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Payment result","content":{"application/json":{"schema":{"description":"Payment result","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object"}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/sales/":{"get":{"summary":"List sales","tags":["Sales"],"parameters":[{"schema":{"type":"string","pattern":"^\\d+$"},"in":"query","name":"page","required":false},{"schema":{"type":"string","pattern":"^\\d+$"},"in":"query","name":"limit","required":false},{"schema":{"type":"string","format":"date"},"in":"query","name":"startDate","required":false,"description":"Filter from date"},{"schema":{"type":"string","format":"date"},"in":"query","name":"endDate","required":false,"description":"Filter to date"}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Paginated sales list","content":{"application/json":{"schema":{"description":"Paginated sales list","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"items":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"invoiceNumber":{"type":"string"},"customerId":{"type":"integer","nullable":true},"subtotal":{"type":"integer"},"discount":{"type":"integer"},"tax":{"type":"integer"},"total":{"type":"integer"},"currency":{"type":"string"},"exchangeRate":{"type":"number"},"interestRate":{"type":"integer"},"interestAmount":{"type":"integer"},"paymentType":{"type":"string","enum":["cash","credit","mixed"]},"paidAmount":{"type":"integer"},"remainingAmount":{"type":"integer"},"status":{"type":"string","enum":["pending","completed","cancelled"]},"notes":{"type":"string","nullable":true},"idempotencyKey":{"type":"string","nullable":true},"createdAt":{"type":"string"},"updatedAt":{"type":"string","nullable":true},"createdBy":{"type":"integer","nullable":true},"items":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"saleId":{"type":"integer"},"productId":{"type":"integer"},"productName":{"type":"string"},"quantity":{"type":"integer"},"unitName":{"type":"string"},"unitFactor":{"type":"integer"},"quantityBase":{"type":"integer"},"batchId":{"type":"integer","nullable":true},"unitPrice":{"type":"integer"},"discount":{"type":"integer"},"subtotal":{"type":"integer"},"cogs":{"type":"integer","nullable":true},"weightedAverageCost":{"type":"integer","nullable":true},"createdAt":{"type":"string"}}}},"cogs":{"type":"integer","nullable":true},"totalCogs":{"type":"integer","nullable":true},"profit":{"type":"integer","nullable":true},"marginBps":{"type":"integer","nullable":true}}}},"total":{"type":"integer"},"page":{"type":"integer"},"limit":{"type":"integer"}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}},"post":{"summary":"Create a sale","tags":["Sales"],"description":"Create a new sale with line items and payment information.","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["items","paymentType"],"properties":{"items":{"type":"array","items":{"type":"object","required":["productId","quantity","unitPrice"],"properties":{"productId":{"type":"integer","minimum":1},"quantity":{"type":"integer","minimum":1},"unitPrice":{"type":"integer","minimum":0},"discount":{"type":"integer","minimum":0},"unitName":{"type":"string"},"unitFactor":{"type":"integer","minimum":1},"batchId":{"type":"integer"}}},"minItems":1},"customerId":{"type":"integer"},"discount":{"type":"integer","minimum":0},"tax":{"type":"integer","minimum":0},"paymentType":{"type":"string","enum":["cash","credit","mixed"]},"paidAmount":{"type":"integer","minimum":0},"currency":{"type":"string"},"notes":{"type":"string"},"interestRate":{"type":"integer"},"interestRateBps":{"type":"integer"},"paymentMethod":{"type":"string","enum":["cash","card","bank_transfer","credit"]},"referenceNumber":{"type":"string"},"idempotencyKey":{"type":"string"}},"additionalProperties":false}}}},"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Created sale","content":{"application/json":{"schema":{"description":"Created sale","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"id":{"type":"integer"},"invoiceNumber":{"type":"string"},"customerId":{"type":"integer","nullable":true},"subtotal":{"type":"integer"},"discount":{"type":"integer"},"tax":{"type":"integer"},"total":{"type":"integer"},"currency":{"type":"string"},"exchangeRate":{"type":"number"},"interestRate":{"type":"integer"},"interestAmount":{"type":"integer"},"paymentType":{"type":"string","enum":["cash","credit","mixed"]},"paidAmount":{"type":"integer"},"remainingAmount":{"type":"integer"},"status":{"type":"string","enum":["pending","completed","cancelled"]},"notes":{"type":"string","nullable":true},"idempotencyKey":{"type":"string","nullable":true},"createdAt":{"type":"string"},"updatedAt":{"type":"string","nullable":true},"createdBy":{"type":"integer","nullable":true},"items":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"saleId":{"type":"integer"},"productId":{"type":"integer"},"productName":{"type":"string"},"quantity":{"type":"integer"},"unitName":{"type":"string"},"unitFactor":{"type":"integer"},"quantityBase":{"type":"integer"},"batchId":{"type":"integer","nullable":true},"unitPrice":{"type":"integer"},"discount":{"type":"integer"},"subtotal":{"type":"integer"},"cogs":{"type":"integer","nullable":true},"weightedAverageCost":{"type":"integer","nullable":true},"createdAt":{"type":"string"}}}},"cogs":{"type":"integer","nullable":true},"totalCogs":{"type":"integer","nullable":true},"profit":{"type":"integer","nullable":true},"marginBps":{"type":"integer","nullable":true}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/sales/{id}":{"get":{"summary":"Get sale by ID","tags":["Sales"],"parameters":[{"schema":{"type":"string","pattern":"^\\d+$"},"in":"path","name":"id","required":true,"description":"Numeric resource ID"}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Sale details","content":{"application/json":{"schema":{"description":"Sale details","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"id":{"type":"integer"},"invoiceNumber":{"type":"string"},"customerId":{"type":"integer","nullable":true},"subtotal":{"type":"integer"},"discount":{"type":"integer"},"tax":{"type":"integer"},"total":{"type":"integer"},"currency":{"type":"string"},"exchangeRate":{"type":"number"},"interestRate":{"type":"integer"},"interestAmount":{"type":"integer"},"paymentType":{"type":"string","enum":["cash","credit","mixed"]},"paidAmount":{"type":"integer"},"remainingAmount":{"type":"integer"},"status":{"type":"string","enum":["pending","completed","cancelled"]},"notes":{"type":"string","nullable":true},"idempotencyKey":{"type":"string","nullable":true},"createdAt":{"type":"string"},"updatedAt":{"type":"string","nullable":true},"createdBy":{"type":"integer","nullable":true},"items":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"saleId":{"type":"integer"},"productId":{"type":"integer"},"productName":{"type":"string"},"quantity":{"type":"integer"},"unitName":{"type":"string"},"unitFactor":{"type":"integer"},"quantityBase":{"type":"integer"},"batchId":{"type":"integer","nullable":true},"unitPrice":{"type":"integer"},"discount":{"type":"integer"},"subtotal":{"type":"integer"},"cogs":{"type":"integer","nullable":true},"weightedAverageCost":{"type":"integer","nullable":true},"createdAt":{"type":"string"}}}},"cogs":{"type":"integer","nullable":true},"totalCogs":{"type":"integer","nullable":true},"profit":{"type":"integer","nullable":true},"marginBps":{"type":"integer","nullable":true}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/sales/{id}/payments":{"post":{"summary":"Add payment to a sale","tags":["Sales"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["amount","paymentMethod"],"properties":{"customerId":{"type":"integer"},"amount":{"type":"integer","minimum":1},"currency":{"type":"string"},"exchangeRate":{"type":"number"},"paymentMethod":{"type":"string","enum":["cash","card","bank_transfer","credit"]},"referenceNumber":{"type":"string"},"notes":{"type":"string"},"idempotencyKey":{"type":"string"}},"additionalProperties":false}}}},"parameters":[{"schema":{"type":"string","pattern":"^\\d+$"},"in":"path","name":"id","required":true,"description":"Numeric resource ID"}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Payment result","content":{"application/json":{"schema":{"description":"Payment result","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object"}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/settings/company":{"get":{"summary":"Get company settings","tags":["Settings"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Company settings","content":{"application/json":{"schema":{"description":"Company settings","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"name":{"type":"string"},"address":{"type":"string","nullable":true},"phone":{"type":"string","nullable":true},"phone2":{"type":"string","nullable":true},"email":{"type":"string","nullable":true},"taxId":{"type":"string","nullable":true},"logo":{"type":"string","nullable":true},"currency":{"type":"string"},"lowStockThreshold":{"type":"integer"}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}},"put":{"summary":"Update company settings","tags":["Settings"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","minLength":1},"address":{"type":"string","nullable":true},"phone":{"type":"string","nullable":true},"phone2":{"type":"string","nullable":true},"email":{"type":"string","format":"email","nullable":true},"taxId":{"type":"string","nullable":true},"logo":{"type":"string","nullable":true},"currency":{"type":"string","minLength":3,"maxLength":3},"lowStockThreshold":{"type":"integer","minimum":0}}}}}},"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Updated settings","content":{"application/json":{"schema":{"description":"Updated settings","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"name":{"type":"string"},"address":{"type":"string","nullable":true},"phone":{"type":"string","nullable":true},"phone2":{"type":"string","nullable":true},"email":{"type":"string","nullable":true},"taxId":{"type":"string","nullable":true},"logo":{"type":"string","nullable":true},"currency":{"type":"string"},"lowStockThreshold":{"type":"integer"}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/settings/currency":{"get":{"summary":"Get currency settings","tags":["Settings"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Currency settings","content":{"application/json":{"schema":{"description":"Currency settings","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"id":{"type":"integer"},"currencyCode":{"type":"string"},"currencyName":{"type":"string"},"symbol":{"type":"string"},"exchangeRate":{"type":"number"},"isBaseCurrency":{"type":"boolean"},"isActive":{"type":"boolean"},"updatedAt":{"type":"string","nullable":true}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/settings/modules":{"get":{"summary":"Get module settings","tags":["Settings"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Module settings","content":{"application/json":{"schema":{"description":"Module settings","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"accountingEnabled":{"type":"boolean"},"purchasesEnabled":{"type":"boolean"},"ledgersEnabled":{"type":"boolean"},"unitsEnabled":{"type":"boolean"},"paymentsOnInvoicesEnabled":{"type":"boolean"}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/settings/setup-wizard":{"post":{"summary":"Complete setup wizard","tags":["Settings"],"description":"Save initial application settings from setup wizard.","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"modules":{"type":"object","properties":{"accountingEnabled":{"type":"boolean"},"purchasesEnabled":{"type":"boolean"},"ledgersEnabled":{"type":"boolean"},"unitsEnabled":{"type":"boolean"},"paymentsOnInvoicesEnabled":{"type":"boolean"}}},"notifications":{"type":"object","properties":{"lowStockThreshold":{"type":"integer"},"expiryDays":{"type":"integer"},"debtReminderCount":{"type":"integer"},"debtReminderIntervalDays":{"type":"integer"}}},"invoice":{"type":"object","properties":{"templateActiveId":{"type":"string"},"prefix":{"type":"string"},"paperSize":{"type":"string","enum":["thermal","a4","a5"]},"logo":{"type":"string"},"footerNotes":{"type":"string"},"layoutDirection":{"type":"string","enum":["rtl","ltr"]},"showQr":{"type":"boolean"},"showBarcode":{"type":"boolean"}}}}}}}},"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Wizard completed","content":{"application/json":{"schema":{"description":"Wizard completed","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"completed":{"type":"boolean"}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/settings/{key}":{"get":{"summary":"Get setting by key","tags":["Settings"],"parameters":[{"schema":{"type":"string","minLength":1},"in":"path","name":"key","required":true,"description":"Settings key"}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Setting value","content":{"application/json":{"schema":{"description":"Setting value","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object"}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}},"put":{"summary":"Update setting by key","tags":["Settings"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["value"],"properties":{"value":{"type":"string","description":"Setting value"}},"additionalProperties":false}}}},"parameters":[{"schema":{"type":"string","minLength":1},"in":"path","name":"key","required":true,"description":"Settings key"}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Operation completed","content":{"application/json":{"schema":{"description":"Operation completed","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"null"}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/supplier-ledger/{supplierId}":{"get":{"summary":"Get supplier ledger entries","tags":["Supplier Ledger"],"parameters":[{"schema":{"type":"string","format":"date"},"in":"query","name":"dateFrom","required":false},{"schema":{"type":"string","format":"date"},"in":"query","name":"dateTo","required":false},{"schema":{"type":"string","pattern":"^\\d+$"},"in":"query","name":"limit","required":false},{"schema":{"type":"string","pattern":"^\\d+$"},"in":"query","name":"offset","required":false},{"schema":{"type":"string","pattern":"^\\d+$"},"in":"path","name":"supplierId","required":true,"description":"Supplier ID"}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Supplier ledger","content":{"application/json":{"schema":{"description":"Supplier ledger","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"entries":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"supplierId":{"type":"integer"},"transactionType":{"type":"string","enum":["invoice","payment","return","adjustment","opening"]},"amount":{"type":"integer"},"balanceAfter":{"type":"integer"},"purchaseId":{"type":"integer","nullable":true},"paymentId":{"type":"integer","nullable":true},"journalEntryId":{"type":"integer","nullable":true},"notes":{"type":"string","nullable":true},"createdAt":{"type":"string"},"createdBy":{"type":"integer","nullable":true}}}},"balance":{"type":"integer"}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/supplier-ledger/{supplierId}/payments":{"post":{"summary":"Record a supplier payment","tags":["Supplier Ledger"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["amount","paymentMethod"],"properties":{"amount":{"type":"number","minimum":0.01,"description":"Payment amount"},"paymentMethod":{"type":"string","enum":["cash","card","bank_transfer","credit"]},"notes":{"type":"string"},"idempotencyKey":{"type":"string"}},"additionalProperties":false}}}},"parameters":[{"schema":{"type":"string","pattern":"^\\d+$"},"in":"path","name":"supplierId","required":true,"description":"Supplier ID"}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Payment recorded","content":{"application/json":{"schema":{"description":"Payment recorded","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object"}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/supplier-ledger/reconcile":{"post":{"summary":"Reconcile supplier balance","tags":["Supplier Ledger"],"description":"Check (or repair) supplier balance totals against ledger sum.","parameters":[{"schema":{"type":"string","enum":["true","false"]},"in":"query","name":"repair","required":false,"description":"If true, auto-correct discrepancies"}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Reconciliation result","content":{"application/json":{"schema":{"description":"Reconciliation result","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object"}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/suppliers/":{"get":{"summary":"List suppliers","tags":["Suppliers"],"parameters":[{"schema":{"type":"string"},"in":"query","name":"search","required":false,"description":"Search by name"},{"schema":{"type":"string","pattern":"^\\d+$"},"in":"query","name":"limit","required":false},{"schema":{"type":"string","pattern":"^\\d+$"},"in":"query","name":"offset","required":false}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"List of suppliers","content":{"application/json":{"schema":{"description":"List of suppliers","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"},"phone":{"type":"string","nullable":true},"phone2":{"type":"string","nullable":true},"address":{"type":"string","nullable":true},"city":{"type":"string","nullable":true},"notes":{"type":"string","nullable":true},"openingBalance":{"type":"integer"},"currentBalance":{"type":"integer"},"isActive":{"type":"boolean"},"createdAt":{"type":"string"},"updatedAt":{"type":"string","nullable":true},"createdBy":{"type":"integer","nullable":true}}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}},"post":{"summary":"Create a supplier","tags":["Suppliers"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["name"],"properties":{"name":{"type":"string","minLength":1},"phone":{"type":"string","nullable":true},"phone2":{"type":"string","nullable":true},"address":{"type":"string","nullable":true},"city":{"type":"string","nullable":true},"notes":{"type":"string","nullable":true},"openingBalance":{"type":"integer","default":0},"isActive":{"type":"boolean","default":true}},"additionalProperties":false}}}},"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Created supplier","content":{"application/json":{"schema":{"description":"Created supplier","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"},"phone":{"type":"string","nullable":true},"phone2":{"type":"string","nullable":true},"address":{"type":"string","nullable":true},"city":{"type":"string","nullable":true},"notes":{"type":"string","nullable":true},"openingBalance":{"type":"integer"},"currentBalance":{"type":"integer"},"isActive":{"type":"boolean"},"createdAt":{"type":"string"},"updatedAt":{"type":"string","nullable":true},"createdBy":{"type":"integer","nullable":true}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/suppliers/{id}":{"get":{"summary":"Get supplier by ID","tags":["Suppliers"],"parameters":[{"schema":{"type":"string","pattern":"^\\d+$"},"in":"path","name":"id","required":true,"description":"Numeric resource ID"}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Supplier details","content":{"application/json":{"schema":{"description":"Supplier details","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"},"phone":{"type":"string","nullable":true},"phone2":{"type":"string","nullable":true},"address":{"type":"string","nullable":true},"city":{"type":"string","nullable":true},"notes":{"type":"string","nullable":true},"openingBalance":{"type":"integer"},"currentBalance":{"type":"integer"},"isActive":{"type":"boolean"},"createdAt":{"type":"string"},"updatedAt":{"type":"string","nullable":true},"createdBy":{"type":"integer","nullable":true}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}},"put":{"summary":"Update a supplier","tags":["Suppliers"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","minLength":1},"phone":{"type":"string","nullable":true},"phone2":{"type":"string","nullable":true},"address":{"type":"string","nullable":true},"city":{"type":"string","nullable":true},"notes":{"type":"string","nullable":true},"openingBalance":{"type":"integer"},"isActive":{"type":"boolean"}},"additionalProperties":false}}}},"parameters":[{"schema":{"type":"string","pattern":"^\\d+$"},"in":"path","name":"id","required":true,"description":"Numeric resource ID"}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Updated supplier","content":{"application/json":{"schema":{"description":"Updated supplier","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"},"phone":{"type":"string","nullable":true},"phone2":{"type":"string","nullable":true},"address":{"type":"string","nullable":true},"city":{"type":"string","nullable":true},"notes":{"type":"string","nullable":true},"openingBalance":{"type":"integer"},"currentBalance":{"type":"integer"},"isActive":{"type":"boolean"},"createdAt":{"type":"string"},"updatedAt":{"type":"string","nullable":true},"createdBy":{"type":"integer","nullable":true}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}},"delete":{"summary":"Delete a supplier","tags":["Suppliers"],"parameters":[{"schema":{"type":"string","pattern":"^\\d+$"},"in":"path","name":"id","required":true,"description":"Numeric resource ID"}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Operation completed","content":{"application/json":{"schema":{"description":"Operation completed","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"null"}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/users/":{"get":{"summary":"List all users","tags":["Users"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"List of users","content":{"application/json":{"schema":{"description":"List of users","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"username":{"type":"string"},"fullName":{"type":"string"},"phone":{"type":"string","nullable":true},"role":{"type":"string","enum":["admin","cashier","manager","viewer"]},"isActive":{"type":"boolean"},"lastLoginAt":{"type":"string","nullable":true},"createdAt":{"type":"string"},"updatedAt":{"type":"string","nullable":true}}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}},"post":{"summary":"Create a user","tags":["Users"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["username","password","fullName"],"properties":{"username":{"type":"string","minLength":1},"password":{"type":"string","minLength":1},"fullName":{"type":"string","minLength":1},"phone":{"type":"string","nullable":true},"role":{"type":"string","enum":["admin","cashier","manager","viewer"],"default":"cashier"},"isActive":{"type":"boolean","default":true}},"additionalProperties":false}}}},"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Created user","content":{"application/json":{"schema":{"description":"Created user","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"id":{"type":"integer"},"username":{"type":"string"},"fullName":{"type":"string"},"phone":{"type":"string","nullable":true},"role":{"type":"string","enum":["admin","cashier","manager","viewer"]},"isActive":{"type":"boolean"},"lastLoginAt":{"type":"string","nullable":true},"createdAt":{"type":"string"},"updatedAt":{"type":"string","nullable":true}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}},"/api/v1/users/{id}":{"get":{"summary":"Get user by ID","tags":["Users"],"parameters":[{"schema":{"type":"string","pattern":"^\\d+$"},"in":"path","name":"id","required":true,"description":"Numeric resource ID"}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"User details","content":{"application/json":{"schema":{"description":"User details","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"id":{"type":"integer"},"username":{"type":"string"},"fullName":{"type":"string"},"phone":{"type":"string","nullable":true},"role":{"type":"string","enum":["admin","cashier","manager","viewer"]},"isActive":{"type":"boolean"},"lastLoginAt":{"type":"string","nullable":true},"createdAt":{"type":"string"},"updatedAt":{"type":"string","nullable":true}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}},"put":{"summary":"Update a user","tags":["Users"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"username":{"type":"string","minLength":1},"password":{"type":"string","minLength":1},"fullName":{"type":"string","minLength":1},"phone":{"type":"string","nullable":true},"role":{"type":"string","enum":["admin","cashier","manager","viewer"]},"isActive":{"type":"boolean"}},"additionalProperties":false}}}},"parameters":[{"schema":{"type":"string","pattern":"^\\d+$"},"in":"path","name":"id","required":true,"description":"Numeric resource ID"}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Updated user","content":{"application/json":{"schema":{"description":"Updated user","type":"object","required":["ok","data"],"properties":{"ok":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"id":{"type":"integer"},"username":{"type":"string"},"fullName":{"type":"string"},"phone":{"type":"string","nullable":true},"role":{"type":"string","enum":["admin","cashier","manager","viewer"]},"isActive":{"type":"boolean"},"lastLoginAt":{"type":"string","nullable":true},"createdAt":{"type":"string"},"updatedAt":{"type":"string","nullable":true}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"description":"Validation error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"401":{"description":"Unauthorized – missing or invalid token","content":{"application/json":{"schema":{"description":"Unauthorized – missing or invalid token","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"description":"Forbidden – insufficient permissions","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"description":"Resource not found","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"description":"Conflict","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"description":"Internal server error","type":"object","required":["ok","error"],"properties":{"ok":{"type":"boolean","enum":[false]},"error":{"$ref":"#/components/schemas/def-5"}}}}}}}}}},"servers":[{"url":"http://localhost:3000","description":"Local development"}],"tags":[{"name":"Auth","description":"Authentication & registration"},{"name":"Users","description":"User management"},{"name":"Categories","description":"Product categories"},{"name":"Products","description":"Product catalog & stock"},{"name":"Sales","description":"Point-of-sale transactions"},{"name":"Purchases","description":"Purchase orders & receiving"},{"name":"Customers","description":"Customer records"},{"name":"Suppliers","description":"Supplier records"},{"name":"Customer Ledger","description":"Customer debt tracking"},{"name":"Supplier Ledger","description":"Supplier balance tracking"},{"name":"Inventory","description":"Stock movements & alerts"},{"name":"Accounting","description":"Chart of accounts & journal entries"},{"name":"Posting","description":"Journal entry posting workflow"},{"name":"Settings","description":"Application & company settings"},{"name":"Dashboard","description":"Aggregated metrics"}]}